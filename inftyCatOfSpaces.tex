In the following we will describe three model structures that will be very important for the \inftycat/ of spaces: The Quillen model structure on $\Top$, the Quillen model structure on $\sSet$ and the \Strom/ model structure on $\Top$.
The first two will turn out the be Quillen equivalent and will be used to define the \inftycat/ of spaces $\spaces$.

The \Strom/ model structure will be important later on; its interaction with the Quillen model structure on $\Top$ will be important parts of our proof that $\spaces$ itself is an \inftytop/.
\begin{prop}[Quillen Model Structure on $\Top$]
    The following three classes of maps endow $\Top$ with a model structure:
    \begin{itemize}
        \item Cofibrations are the maps which are retracts of relative CW-complexes. %TODO relative CW-complex def
        \item Weak equivalences are the maps inducing isomorphisms on $\pi_n$ for $n\in\Nat$.
        \item Fibrations are the maps with right lifting property against the class of maps $\set{D^n\xhookrightarrow{\left(\id_{D^n},0\right)}D^n\times I\mid n\in\Nat}$
    \end{itemize}
    We call this model structure the \emph{Quillen Model Structure on $\Top$}.
\end{prop}
%TODO Strom model structure on \Top
\begin{prop}[Quillen Model Structure on $\sSet$]
    The following three classes of maps endow $\sSet$ with a model structure:
    \begin{itemize}
        \item Cofibrations are the monomorphisms.
        \item Weak equivalences are the maps that are weak equivalences under geometric realization. %TODO define geometric realization
        \item Fibrations are the maps with right lifting property against the maps $\set{\Lambda_k^n\xhookrightarrow{}\Delta^n\mid 0\leq k\leq n}$.
    \end{itemize}
    We call this model structure the \emph{Quillen Model Structure on $\sSet$}.
\end{prop}
\begin{remark}
    The category $\sSet$ together with the Quillen model structure is a cofibrantly generated model category:
    \begin{itemize}
        \item The cofibrations are generated by the class $I=\set{\partial\Delta^n\hookrightarrow \Delta^n\mid n\in\Nat}$
        \item The trivial cofibrations (which are also called \emph{anodyne maps}) are generated by the class $J=\set{\Lambda_k^n\hookrightarrow\Delta^n\mid 0\leq k\leq n}$
    \end{itemize}
    and both of these classes admit the small object argument.
    This is because their domains are finite simplicial sets and therefore their covariant $\hom$-functor commutes with filtered colimits.

    We can enrich $\sSet$ over itself by setting $\Hom_{\sSet}(A,B)_n=\hom_{\sSet}(A\times\Delta^n,B)$ to obtain a simplicial category that is tensored (via the product) and powered (via the just defined $\Hom$).
    By %Kerodon Corollary 1.4.5.6., Theorem 3.1.3.1. Theorem 3.1.3.5. 
    we have that for a cofibration $A\to B$ and a fibration $X\to Y$ the induced map 
    \begin{equation*}
        \Hom_{\sSet}(B,X)\to\Hom_{\sSet}(A,X)\times_{\Hom_{\sSet}(A,Y)}\Hom_{\sSet}(B,Y)
    \end{equation*}
    is a fibration that additionally is a weak equivalence whenever $A\to B$ or $X\to Y$ is a weak equivalence, so $\sSet$ is a simplicial model category.
    As it is locally presentable by construction and the model structure is cofibrantly generated, we have that $\sSet$ is a combinatorial model category.
\end{remark}
%TODO Joyal model structure on \sSet
\begin{prop}[Quillen Equivalence of the Model Structure on $\Top$ and $\sSet$]
    The functors
    \begin{equation*}
        \lvert-\rvert\colon\sSet\rightleftarrows\Top\colon\Sing(-)
    \end{equation*}
    form a Quillen equivalence, where $\lvert-\rvert$ denotes geometric realization and $\Sing(-)$ is the singular simplicial set functor.
    \begin{proof}
        By %Kerodon Corollary 1.1.8.5.
        the functors are adjoint.

        Thus $\lvert-\rvert\colon\sSet\to\Top$ preserves colimits and since $\lvert\partial\Delta^n\rvert\to\lvert\Delta^n\rvert\;\cong\;S^{n-1}\xhookrightarrow{} D^n$, $\lvert-\rvert$ it preserves cofibrations.
        Since it also preserves weak equivalences by definition, it preserves trivial cofibrations and thus the adjunction is a Quillen adjunction.

        To prove it is a Quillen equivalence, we need to prove that 
        \begin{itemize}
            \item for every cofibrant object $A\in\sSet$ and a fibrant replacement $\lvert A\rvert\xrightarrow{\sim}\widehat{\lvert A\rvert}$ the composition $A\to\Sing(\lvert A\rvert)\to\Sing(\widehat{\lvert A\rvert})$ where $A\to\Sing(\lvert A\rvert)$ is the adjuntion unit, is a weak equivalence.
            \item for every fibrant object $X\in\Top$ and a cofibrant replacement $\widehat{\Sing(X)}\xrightarrow{\sim}\Sing(X)$ the composition $\lvert\widehat{\Sing(X)}\rvert\to\lvert\Sing(X)\rvert\to X$ where $\lvert\Sing(X)\rvert\to X$ is the adjunction counit, is a weak equivalence.
        \end{itemize}
        Since all simplicial sets are cofibrant and all topological spaces are fibrant, we can pick the replacements to be the identity in both cases.
        Thus the statement is reduced to proving that unit and counit are objectwise weak equivalences. 
        This is proven in %TODO cite Kerodon 3.5.4.1 and 3.5.4.2 
        .
    \end{proof}
\end{prop}
%TODO define W_{\sSet},W_{\Top}
\begin{prop}\label{prop:homotopyHypothesis}
    The Quillen equivalence 
    \begin{equation*}
        \lvert-\rvert\colon\sSet\rightleftarrows\Top\colon\Sing(-)
    \end{equation*}
    induces an equivalence of \inftycats/ 
    \begin{equation*}
        F\coloneqq\N(\lvert-\rvert)\colon \N(\sSet)\lbrack W_{\sSet}^{-1}\rbrack\longleftrightarrow\N(\Top)\lbrack W_{\Top}^{-1}\rbrack\colon \N(\Sing(-))\eqqcolon G\;.
    \end{equation*}
    \begin{proof}
        Since we have $\N(\lvert W_{\sSet}\rvert)\subset \N(W_{\Top})$ by definition, by the universal property of localization we obtain a localization $F\colon \N(\sSet)\lbrack W_{\sSet}^{-1}\rbrack\to\N(\Top)\lbrack W_{\Top}^{-1}\rbrack$.

        To prove $\N(\Sing(W_{\Top}))\subset\N(W_{\sSet})$ we have to check that for a weak equivalence if topological spaces $X\xrightarrow{\sim} Y$, the induced map $\lvert\Sing(X)\rvert\to \lvert\Sing(Y)\rvert$ is also a weak equivalence.
        This follows from that fact that a map is a weak equivalence if and only if it is an isomorphism in the homotopy category and the fact that the unit of the adjunction is a weak equivalence.
        Thus we also obtain a functor $G\colon\N(\Top)\lbrack W_{\Top}^{-1}\rbrack\to\N(\sSet)\lbrack W_{\sSet}^{-1}\rbrack$.

        Since unit and counit are objectwise weak equivalences, their induced maps $\epsilon\colon\id\to GF$ and $\eta\colon FG\to \id$ are objectwise invertible and thus invertible natural transformations, which proves the proposition. %TODO cite proof 
    \end{proof}
\end{prop}
% \begin{prop} %TODO https://people.math.rochester.edu/faculty/doug/otherpapers/dwyer-kan-3.pdf prop 4.8 proves htpy coh nerve of fibcofib is localization at w.e.
%     Let $\gamma\colon\N(\sSet)\to\Nhc(\sSet^°)$ be a map given by applying $\N$ to a fibrant replacement functor $R\colon\sSet\to\sSet^°$ and composing with the inclusion $\N(\sSet^°)\to\Nhc(\sSet^°)$.
    
%     Then the \inftycat/ $\Nhc(\sSet^°)$ together with $\gamma$ is a localization of $\N(\sSet)$ at $W_{\sSet}$.
% \end{prop}
\begin{corollary}
    There is an equivalence of \inftycats/ $\Nhc(\sSet^°)\to\N(\Top)[W_{\Top}^{-1}]$ induced by the universal property of simplicial localization. %TODO Theorem 1.3.4.20. HA
    \begin{proof}
        By %TODO Theorem 1.3.4.20. HA
        we have an equivalence of \inftycats/ $\Nhc(\sSet^°)\to\N(\sSet)[W_{\sSet}^{-1}]$ induced by the universal property of simplicial localization via the \infty-categorical version of the Yoneda lemma. 
        By \cref{prop:homotopyHypothesis} we also have an equivalence of \inftycats/ $\N(\sSet)[W_{\sSet}^{-1}]\to\N(\Top)[W_{\Top}^{-1}]$.
        Composition now gives the desired map.
    \end{proof}
\end{corollary}
\begin{definition}
    We set $\spaces=\Nhc(\sSet^°)$ to be the \emph{\inftycat/ of spaces}.
\end{definition}
%TODO pullbacks in homotopy theory Proof of Theorem 25 for Second cube theorem (universality)
%TODO relation of h(co)lim of model cat and simpl cat is in Higher Algebra 1.3.4.24, also see HTT Corollary 4.2.4.8
%TODO prove htpy hypothesis