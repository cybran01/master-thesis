In the following we will describe three model structures that will be used throughout: 
The Quillen model structure on $\sSet$ (which was already introduced in the previous section), the Quillen model structure on $\Top$ and the \Strom/ model structure on $\Top$.
The first two will turn out to be Quillen equivalent and will be used to define the \inftycat/ of spaces $\spaces$.

The \Strom/ model structure will be important later on; its interaction with the Quillen model structure on $\Top$ will be an important part of our proof that $\spaces$ is an \inftytop/.
\begin{prop}\label{prop:sSetCombSimpModelStructure}
    The Quillen model structure on $\sSet$ together with its natural enrichment over itself gives it the structure of a combinatorial simplicial model category.
    \begin{proof}
        First we note that the category $\sSet$ together with the Quillen model structure is a combinatorial model category (see e.g. \cite[Remark 7.11.15]{cisinski_2019}).
        
        The category $\sSet$ is enriched over itself by setting $\Hom_{\sSet}(A,B)_n=\hom_{\sSet}(A\times\Delta^n,B)$ so it is a simplicial category.
        It is further tensored (via the product) and powered (via the just defined $\Hom_{\sSet}(-,-)$).
        By \cite[Corollary 1.4.5.6, Theorem 3.1.3.1 and Theorem 3.1.3.5]{kerodon} we have that for a cofibration $A\xtailrightarrow{} B$ and a fibration $X\xtwoheadrightarrow{} Y$ the induced map 
        \begin{equation*}
            \Hom_{\sSet}(B,X)\to\Hom_{\sSet}(A,X)\times_{\Hom_{\sSet}(A,Y)}\Hom_{\sSet}(B,Y)
        \end{equation*}
        is a fibration that additionally is a weak equivalence whenever $A\xtailrightarrow{} B$ or $X\xtwoheadrightarrow{} Y$ is a weak equivalence, so $\sSet$ is a simplicial model category.
    \end{proof}
\end{prop}
\begin{definition}[Serre Fibration]
    Let $f\colon X\to Y$ be a map such that for all $n\in\Nat$ all commutative squares
    \begin{center}
        \begin{tikzcd} [sep = 4em]
            D^n \arrow[r] \arrow[d, hook, "{(\id_{D^n},0)}"'] & X \arrow[d, "f"] \\
            D^n\times I \arrow[ur, dashed, "\exists"] \arrow[r] & Y \\
        \end{tikzcd}
    \end{center}
    admit a lift. 
    %(In  other  words, $f$ has the right lifting property against the maps $\set{D^n\xhookrightarrow{(\id_{D^n},0)}D^n\times I\mid n\in\Nat}$.) 
    Then we call $f$ a \emph{Serre fibration}.
\end{definition}
\begin{definition}[Hurewicz Fibration]
    Let $f\colon X\to Y$ be a map such that for all spaces $X$ and all squares
    \begin{center}
        \begin{tikzcd} [sep = 4em]
            X \arrow[r] \arrow[d, hook, "{(\id_{X},0)}"'] & X \arrow[d, "f"] \\
            X\times I \arrow[ur, dashed, "\exists"] \arrow[r] & Y \\
        \end{tikzcd}
    \end{center}
    admit a lift.
    Then we call $f$ a \emph{Hurewicz fibration}.
\end{definition}
\begin{definition}[Hurewicz Cofibration]
    Let $i\colon A\to B$ be a map such that for all spaces $X$ and maps $A\times I\to X$, $B\to X$ that make the diagram below commute, there exists a map $B\times I\to X$ such that
    \begin{center}
        \begin{tikzcd} [sep = 4em]
            A \arrow[r,"\id_A\times\set{0}"] \arrow[d, "i"'] & A\times I \arrow[d, "i\times\id_I"] \arrow[ddr, bend left] & \\
            B \arrow[r,"\id_B\times\set{0}"] \arrow[drr, bend right] & B\times I \arrow[dr, dashed, "\exists"] & \\
            &&X
        \end{tikzcd}
    \end{center}
    commutes.
    Then we say $i$ fulfills the \emph{homotopy extension property (HEP)} or $i$ is a \emph{Hurewicz cofibration}.
    If the image $i(A)$ is closed, we call $i$ a \emph{closed Hurewicz cofibration}.
\end{definition}
\begin{remark}
    A Hurewicz cofibration is always an inclusion, see \cite[Proposition 4H.1]{hatcher2002algebraic}.
\end{remark}
%TODO w.e., htpy eq
When speaking of cofibrations, fibrations or weak equivalences between topological spaces, we are always referring to the following model structure.
\begin{prop}[Quillen Model Structure on $\Top$]
    The following classes of maps endow $\Top$ with a model structure:
    \begin{itemize}
        \item Weak equivalences are weak equivalences of topological spaces. %TODO DEFINE
        \item Fibrations are the Serre fibrations.
    \end{itemize}
    We call this model structure the \emph{Quillen Model Structure on $\Top$}.
    
    The cofibrations contain the maps $S^{n-1}\xhookrightarrow{}D^n$ for $n\in\Nat$ (where $S^{-1}=\emptyset$).
    \begin{reference}
        \cite[Chap. II, \S 3, Theorem 1]{Quillen1967}
    \end{reference}
\end{prop}
The other model structure on $\Top$ we will need is given by the following.
\begin{prop}[\Strom/ Model Structure on $\Top$]
    The following three classes of maps endow $\Top$ with a model structure:
    \begin{itemize}
        \item Cofibrations are the closed Hurewicz cofibrations, which we will refer to as \emph{h-cofibrations}.
        \item Weak equivalences are the homotopy equivalences.
        \item Fibrations are the Hurewicz fibrations, which we will refer to as \emph{h-fibrations}.
    \end{itemize}
    We call this model structure the \emph{\Strom/ Model Structure on $\Top$}.
    \begin{reference}
       \cite{Strom1972}
    \end{reference}
\end{prop}
\begin{remark}
    Since every h-fibration is a fibration and every homotopy equivalence is a weak equivalence, every cofibration is a h-cofibration.
\end{remark}
\begin{remark}[Properness]
    The Quillen model structures on $\sSet$ and $\Top$ are both proper (meaning left and right proper).
    The same is true for the \Strom/ model structure, since all objects in this model category are cofibrant and fibrant.
    Hence, whenever computing homotopy pushouts/pullbacks, it will suffice to only replace one map by a cofibration/fibration.
\end{remark}
\begin{prop}[Quillen Equivalence of Quillen Model Structures]\label{prop:quillenEqSSetTop}
    The functors
    \begin{equation*}
        \lvert-\rvert\colon\sSet\rightleftarrows\Top\mkern+3mu:\mkern-3mu\Sing(-)
    \end{equation*}
    form a Quillen equivalence, where $\lvert-\rvert$ denotes geometric realization and $\Sing(-)$ is the singular simplicial set functor.
    \begin{proof}
        By \cite[Corollary 1.1.8.5]{kerodon} the functors are adjoint.

        Thus $\lvert-\rvert\colon\sSet\to\Top$ preserves colimits and since $\lvert\partial\Delta^n\xhookrightarrow{}\Delta^n\rvert\;\cong\;S^{n-1}\xhookrightarrow{} D^n$, geometric realization preserves cofibrations.
        Since it also preserves weak equivalences by definition, it preserves trivial cofibrations and therefore the adjunction is a Quillen adjunction.

        To prove it is a Quillen equivalence, we need to prove that 
        \begin{itemize}
            \item for every cofibrant object $A\in\sSet$ and a fibrant replacement $\lvert A\rvert\xrightarrow{\sim}\widehat{\lvert A\rvert}$ the composition $A\to\Sing(\lvert A\rvert)\to\Sing(\widehat{\lvert A\rvert})$ where $A\to\Sing(\lvert A\rvert)$ is the adjuntion unit, is a weak equivalence.
            \item for every fibrant object $X\in\Top$ and a cofibrant replacement $\widehat{\Sing(X)}\xrightarrow{\sim}\Sing(X)$ the composition $\lvert\widehat{\Sing(X)}\rvert\to\lvert\Sing(X)\rvert\to X$ where $\lvert\Sing(X)\rvert\to X$ is the adjunction counit, is a weak equivalence.
        \end{itemize}
        Since all simplicial sets are cofibrant and all topological spaces are fibrant, we can pick the replacements to be the identity in both cases.
        Thus the statement is reduced to proving that unit and counit are objectwise weak equivalences. 
        This is proven in e.g. \cite[Theorem 3.5.4.1 and Corollary 3.5.4.2]{kerodon}.
    \end{proof}
\end{prop}
%TODO define W_{\sSet},W_{\Top}
\begin{corollary}[Homotopy Hypothesis]\label{prop:homotopyHypothesis}
    The Quillen equivalence 
    \begin{equation*}
        \lvert-\rvert\colon\sSet\rightleftarrows\Top\mkern+3mu:\mkern-3mu\Sing(-)
    \end{equation*}
    induces an equivalence of \inftycats/ 
    \begin{equation*}
        \N(\lvert-\rvert)\colon \N(\sSet)\lbrack W_{\sSet}^{-1}\rbrack\longleftrightarrow\N(\Top)\lbrack W_{\Top}^{-1}\rbrack\mkern+3mu:\mkern-3mu\N(\Sing(-))\;.
    \end{equation*}
    \begin{proof}
        Using \cref{prop:quillenEqSSetTop} this follows from the fact that Quillen equivalences induce equivalences of \inftycats/ after simplicial localization at the weak equivalences, see e.g. \cite[Corollary 1.3]{quillen_adj_15}.
    \end{proof}
\end{corollary}
\begin{corollary}\label{cor:htpyCoherentNerveIsLoc}
    There is an equivalence of \inftycats/ $\Nhc(\sSet^°)\to\N(\Top)[W_{\Top}^{-1}]$ induced by the universal property of simplicial localization.
    \begin{proof}
        Using that $\sSet$ is a combinatorial simplicial model category, by \cite[Theorem 1.3.4.20]{higher_algebra} we have an equivalence of \inftycats/ $\Nhc(\sSet^°)\to\N(\sSet)[W_{\sSet}^{-1}]$.
        By \cref{prop:homotopyHypothesis} we also have an equivalence of \inftycats/ $\N(\sSet)[W_{\sSet}^{-1}]\to\N(\Top)[W_{\Top}^{-1}]$.
        Composition now gives the desired map.
    \end{proof}
\end{corollary}
\begin{definition}
    We set $\spaces=\N(\Top)[W_{\Top}^{-1}]$ to be the \emph{\inftycat/ of spaces}.
    For convenience of notation we pick a model of $\N(\Top)[W_{\Top}^{-1}]$ that has the same objects as $\Top$, which is possible by \cref{prop:simpLocEssSurj}.
\end{definition}
%TODO pullbacks in homotopy theory Proof of Theorem 25 for Second cube theorem (universality)
%TODO relation of h(co)lim of model cat and simpl cat is in Higher Algebra 1.3.4.24, also see HTT Corollary 4.2.4.8
%TODO prove htpy hypothesis